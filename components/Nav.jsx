'use client'
import useDropdown from '@/hooks/useDropdown';
import FilterNavbar from './FilterNavbar';
import AvatarImage from '/public/avatar.svg';
import Image from 'next/image'

const Nav = () => {
   const {dropdownRef,handleClick,isOpen,iconRef} = useDropdown()

  

   console.log(isOpen)


    return (
        <nav className="h-[108px] flex justify-evenly flex-row-reverse gap-6 ps-6 padding-l bg-white w-full">
            <div className="user flex justify-between flex-row items-center gap-6">
                <div className="notif">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.85002 8.99999C6.85002 7.6811 7.29061 6.39 8.13533 5.4397C8.96613 4.50505 10.2307 3.84999 12 3.84999C13.7694 3.84999 15.0339 4.50505 15.8647 5.4397C16.7094 6.39 17.15 7.6811 17.15 8.99999C17.15 10.2596 17.7766 11.1982 18.2542 11.9137L18.2928 11.9715C18.8111 12.7489 19.15 13.2938 19.15 14C19.15 14.9742 18.4563 15.7578 17.0165 16.3363C15.599 16.9058 13.7185 17.15 12 17.15C10.2816 17.15 8.40102 16.9058 6.98359 16.3363C5.54375 15.7578 4.85002 14.9742 4.85002 14C4.85002 13.3065 5.17424 12.8297 5.69813 12.0754C6.20176 11.3504 6.85002 10.4078 6.85002 8.99999ZM12 2.14999C9.76938 2.14999 8.03393 2.99494 6.86473 4.31028C5.70944 5.60998 5.15002 7.31888 5.15002 8.99999C5.15002 9.83352 4.79829 10.391 4.30191 11.1056L4.23218 11.2057C3.76258 11.8785 3.15002 12.7561 3.15002 14C3.15002 16.0257 4.67852 17.2422 6.3498 17.9137C8.04348 18.5942 10.1629 18.85 12 18.85C13.8371 18.85 15.9566 18.5942 17.6503 17.9137C19.3215 17.2422 20.85 16.0257 20.85 14C20.85 12.7404 20.2235 11.8018 19.7458 11.0863L19.7073 11.0285C19.189 10.2511 18.85 9.70621 18.85 8.99999C18.85 7.31888 18.2906 5.60999 17.1353 4.31028C15.9661 2.99494 14.2307 2.14999 12 2.14999ZM9.52853 19.2928C9.91605 19.0344 10.4386 19.1363 10.7011 19.5193L10.7074 19.5278C10.7165 19.5397 10.7342 19.5621 10.7603 19.5915C10.8132 19.6511 10.897 19.7352 11.01 19.82C11.2336 19.9876 11.559 20.15 12 20.15C12.441 20.15 12.7665 19.9876 12.99 19.82C13.1031 19.7352 13.1868 19.6511 13.2397 19.5915C13.2659 19.5621 13.2836 19.5397 13.2927 19.5278L13.299 19.5193C13.5615 19.1363 14.084 19.0344 14.4715 19.2928C14.8621 19.5532 14.9677 20.0809 14.7073 20.4715L14 20C14.7073 20.4715 14.7071 20.4718 14.7068 20.4721L14.7064 20.4728L14.7054 20.4742L14.7033 20.4774L14.6983 20.4847L14.6849 20.5038C14.6746 20.5184 14.6612 20.5367 14.6449 20.5581C14.6123 20.6009 14.5675 20.6566 14.5103 20.721C14.3966 20.8489 14.2303 21.0148 14.01 21.18C13.5669 21.5123 12.8924 21.85 12 21.85C11.1077 21.85 10.4332 21.5123 9.99002 21.18C9.76974 21.0148 9.60348 20.8489 9.48973 20.721C9.43256 20.6566 9.38775 20.6009 9.35516 20.5581C9.33884 20.5367 9.3255 20.5184 9.31512 20.5038L9.30176 20.4847L9.29673 20.4774L9.29462 20.4742L9.29367 20.4728L9.29322 20.4721C9.293 20.4718 9.29278 20.4715 10 20L9.29278 20.4715C9.03238 20.0809 9.13793 19.5532 9.52853 19.2928Z" fill="black"/>
                    </svg>
                </div>
                <div className="user-info flex flex-row justify-center items-center gap-2">
                    <Image src={AvatarImage} alt="User Image" id='user_image' />
                    <span className="user-name" id='user_name'> أحمد بن خالد</span>
                </div>
            </div>
            
            <div className="search-input relative flex-1 flex justify-center items-center bg-white p-6 ps-0"
            
            >
                <label htmlFor="search" className="flex-1 w-full flex flex-row justify-between items-center px-6 py-3 rounded-md bg-app-light-gray cursor-pointer"> 
                    <span className="text-app-gray">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.85002 9.99999C3.85002 6.60344 6.60347 3.84999 10 3.84999C13.3966 3.84999 16.15 6.60344 16.15 9.99999C16.15 13.3965 13.3966 16.15 10 16.15C6.60347 16.15 3.85002 13.3965 3.85002 9.99999ZM10 2.14999C5.66459 2.14999 2.15002 5.66456 2.15002 9.99999C2.15002 14.3354 5.66459 17.85 10 17.85C11.8615 17.85 13.5717 17.202 14.9173 16.1194L20.399 21.601C20.7309 21.933 21.2691 21.933 21.6011 21.601C21.933 21.2691 21.933 20.7309 21.6011 20.399L16.1194 14.9173C17.2021 13.5717 17.85 11.8615 17.85 9.99999C17.85 5.66456 14.3355 2.14999 10 2.14999Z" fill="#7C7C7C"/>
                        </svg> 
                    </span>
                    <input type="" name="search" id="search" className="bg-app-light-gray text-primary flex-1 px-6 focus:outline-[0_!important]  border-[transparent_!important] focus:border-[transparent_!important]" />
                    <button className="text-app-gray"   onClick={handleClick} ref={iconRef}
 >
                    <svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fillRule="evenodd" clipRule="evenodd" d="M6.59663 0.000173914C5.76266 0.0215997 5.08795 0.714792 5.08795 1.55505V1.82324H0.412271C0.184896 1.82417 0.000929135 2.00814 2.3484e-06 2.23532C-0.000367042 2.34522 0.0428544 2.45051 0.120064 2.52845C0.197455 2.6064 0.302556 2.65036 0.412271 2.65073H5.08795V2.91984C5.08795 3.77339 5.78484 4.47472 6.63711 4.47472H9.04032C9.89254 4.47472 10.5887 3.77339 10.5887 2.91984V2.65073H23.5845H23.5843C23.6946 2.65128 23.8004 2.6075 23.8784 2.52956C23.9565 2.45161 24.0001 2.34577 23.9998 2.23532C23.9992 2.1256 23.9552 2.02069 23.8773 1.94329C23.7995 1.86609 23.6941 1.82286 23.5843 1.82323H10.5885V1.55504C10.5885 0.701495 9.89255 0.000164174 9.04014 0.000164174H6.63693C6.62363 0.000164174 6.60977 -0.000205217 6.59648 0.000164174L6.59663 0.000173914ZM6.63708 0.824541H9.04029C9.44554 0.824541 9.7612 1.14279 9.7612 1.55505V2.91983C9.7612 3.3321 9.44572 3.64627 9.04029 3.64627H6.63708C6.23183 3.64627 5.91617 3.33209 5.91617 2.91983V1.55505C5.91617 1.14278 6.23165 0.824541 6.63708 0.824541ZM14.9597 7.44633C14.1075 7.44633 13.4115 8.15078 13.4115 9.00433V9.27271L0.412388 9.27252C0.184828 9.27345 0.000677196 9.45797 0.000119233 9.68553C0.0010428 9.91272 0.185013 10.0967 0.412388 10.0976H13.4115V10.366C13.4115 11.2195 14.1075 11.924 14.9597 11.924H17.3629C18.2151 11.924 18.9121 11.2195 18.9121 10.366V10.0976H23.5846C23.6943 10.098 23.7998 10.0548 23.8775 9.97755C23.9554 9.90034 23.9994 9.79524 24 9.68552C23.9996 9.57562 23.9559 9.47034 23.8779 9.39276C23.8 9.31537 23.6945 9.27215 23.5846 9.27252H18.9123V9.00414C18.9123 8.1506 18.2154 7.44614 17.3631 7.44614L14.9597 7.44633ZM14.9597 8.27382H17.3629C17.7682 8.27382 18.0838 8.59207 18.0838 9.00433V10.366C18.0838 10.7783 17.7684 11.0965 17.3629 11.0965H14.9597C14.5545 11.0965 14.239 10.7782 14.239 10.366V9.00433C14.239 8.59206 14.5545 8.27382 14.9597 8.27382ZM6.63708 14.8951C5.78486 14.8951 5.08793 15.5965 5.08793 16.45V16.7191H0.412435C0.30272 16.7195 0.197619 16.7635 0.120228 16.8414C0.0430209 16.9193 -0.000202331 17.0246 0.000166492 17.1343C0.00109006 17.3617 0.185061 17.5457 0.412435 17.5466H5.08812V17.8157C5.08812 18.6693 5.78501 19.3697 6.63727 19.3697H9.04048C9.8927 19.3697 10.5889 18.6693 10.5889 17.8157V17.5466H23.5847H23.5845C23.6942 17.547 23.7997 17.5038 23.8775 17.4266C23.9554 17.3492 23.9994 17.2441 23.9999 17.1343C24.0003 17.0241 23.9567 16.9182 23.8786 16.8403C23.8006 16.7622 23.6948 16.7186 23.5845 16.7191H10.5887V16.45C10.5887 15.5965 9.8927 14.8951 9.04029 14.8951L6.63708 14.8951ZM6.63708 15.7234H9.04029C9.44554 15.7234 9.7612 16.0376 9.7612 16.4498V17.8156C9.7612 18.2278 9.44572 18.542 9.04029 18.542H6.63708C6.23183 18.542 5.91617 18.2278 5.91617 17.8156V16.4498C5.91617 16.0376 6.23165 15.7234 6.63708 15.7234Z" fill="#7C7C7C"/>
</svg>
                    </button>
                </label>

           {isOpen && <div className="p-4 absolute z-[30] w-full mt-3 top-16"
           ref={dropdownRef}
           >
                 <FilterNavbar />
           </div>}
          
            </div>
        </nav>
    )
}

export default Nav